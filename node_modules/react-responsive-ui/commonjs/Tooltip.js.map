{"version":3,"sources":["../source/Tooltip.js"],"names":["PureComponent","Component","Tooltip","state","show","isShown","animate","hide_timeout","undefined","tooltip","classList","remove","createTooltip","Promise","resolve","setState","accessible","props","calculate_coordinates","x","y","style","left","top","add","isTouchDevice","document","addEventListener","hideOnTouchOutside","hide","hidingAnimationDuration","removeEventListener","destroy_tooltip","_isMounted","event","contains","target","origin","onClick","then","focus","onMouseMove","onMouseEnter","onMouseEnterTooltip","isPointerInsideTooltip","cancelHide","onMouseLeaveTooltip","isPointerInsideElement","scheduleHide","DocumentMouseMove","wasMouseMoved","_onMouseEnter","onMouseLeave","show_timeout","onTouchStartSetTouchDevice","onTouchStart","content","renderContent","createPortal","onTouchEnd","onFocusOut","relatedTarget","onKeyDown","defaultPrevented","ctrlKey","altKey","shiftKey","metaKey","keyCode","preventDefault","storeOriginNode","ref","tooltipClassName","placement","createElement","position","setAttribute","getEdge","split","className","container","appendChild","hide_on_mouse_leave_timeout","parentNode","removeChild","screenMargin","offsetTop","width","offsetWidth","height","offsetHeight","getSide","fitOnScreen","hideTimeout","hideDelay","window","rruiCollapseOnFocusOut","delay","component","componentProps","Fragment","_render","extraChildren","inline","children","rest","propTypes","oneOf","isRequired","node","func","object","bool","number","string","defaultProps","body","minimal_margin","innerWidth","pageYOffset","innerHeight","dashIndex","indexOf","slice","length","onDocumentMouseMove","onDocumentScroll"],"mappings":"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","file":"Tooltip.js","sourcesContent":["import React from 'react'\r\nimport ReactDOM from 'react-dom'\r\nimport PropTypes from 'prop-types'\r\nimport classNames from 'classnames'\r\n\r\n// For some weird reason, in Chrome, `setTimeout()` would lag up to a second (or more) behind.\r\n// Turns out, Chrome developers have deprecated `setTimeout()` API entirely without asking anyone.\r\n// Replacing `setTimeout()` with `requestAnimationFrame()` can work around that Chrome bug.\r\n// https://github.com/bvaughn/react-virtualized/issues/722\r\nimport { setTimeout, clearTimeout } from 'request-animation-frame-timeout'\r\n\r\nimport { getOffset } from './utility/dom'\r\n\r\n// `PureComponent` is only available in React >= 15.3.0.\r\nconst PureComponent = React.PureComponent || React.Component\r\n\r\n// https://github.com/Dogfalo/materialize/blob/master/js/tooltip.js\r\nexport default class Tooltip extends PureComponent\r\n{\r\n\tstatic propTypes =\r\n\t{\r\n\t\t// Tooltip placement.\r\n\t\tplacement : PropTypes.oneOf([\r\n\t\t\t'top',\r\n\t\t\t'top-start',\r\n\t\t\t'top-end',\r\n\t\t\t'left',\r\n\t\t\t'left-start',\r\n\t\t\t'left-end',\r\n\t\t\t'bottom',\r\n\t\t\t'bottom-start',\r\n\t\t\t'bottom-end',\r\n\t\t\t'right',\r\n\t\t\t'right-start',\r\n\t\t\t'right-end'\r\n\t\t]).isRequired,\r\n\r\n\t\t// Tooltip content.\r\n\t\tcontent : PropTypes.node,\r\n\r\n\t\t// Tooltip content component.\r\n\t\t// Will have access to `hide()` property.\r\n\t\tcomponent : PropTypes.func,\r\n\t\tcomponentProps : PropTypes.object,\r\n\r\n\t\t// Whether this element should be displayed as `inline-block`.\r\n\t\t// (is `true` by default)\r\n\t\tinline : PropTypes.bool.isRequired,\r\n\r\n\t\t// If `true` then the tooltip will be accessible via keyboard.\r\n\t\t// The tooltipped element will be wrapped in a focusable `<button/>`\r\n\t\t// that will show/hide the tooltip on click.\r\n\t\t// Tooltip contents will be focused upon being shown.\r\n\t\t// The tooltip will be closeable via `Esc` key.\r\n\t\t// The tooltip will still be shown/hidden on mouseover.\r\n\t\t// (is `false` by default)\r\n\t\taccessible : PropTypes.bool,\r\n\r\n\t\t// The delay before the tooltip is shown (in milliseconds)\r\n\t\tdelay : PropTypes.number.isRequired,\r\n\r\n\t\t// The duration of the tooltip hiding animation.\r\n\t\t// The DOM element will retain `display: block` for this time period.\r\n\t\t// When changing this timeout also change `transition` time for\r\n\t\t// `.tooltip--after-show` and `.tooltip--before-hide` CSS classes.\r\n\t\t// Is `120` by default.\r\n\t\thidingAnimationDuration : PropTypes.number.isRequired,\r\n\r\n\t\t// (`hideTimeout` is deprecated, use `hideDelay` instead)\r\n\t\t// The tooltip waits `hideTimeout` milliseconds before hiding\r\n\t\t// to support mouseovering over itself.\r\n\t\thideTimeout : PropTypes.number,\r\n\r\n\t\t// The tooltip waits `hideDelay` milliseconds before hiding\r\n\t\t// to support mouseovering over itself.\r\n\t\thideDelay : PropTypes.number.isRequired,\r\n\r\n\t\tscreenMargin : PropTypes.number.isRequired,\r\n\t\t// When passing `offsetTop`, also set `--rrui-tooltip-visible-distance` to `0px`.\r\n\t\toffsetTop : PropTypes.number.isRequired,\r\n\r\n\t\t// `container: () => DOMElement` property is optional\r\n\t\t// and is gonna be the parent DOM Element for the tooltip itself\r\n\t\t// (`document.body` by default).\r\n\t\t// (in which case make sure that `document.body` has no `margin`\r\n\t\t//  otherwise tooltip `left` and `top` positions will be slightly off).\r\n\t\tcontainer : PropTypes.func,\r\n\r\n\t\t// CSS style object\r\n\t\tstyle : PropTypes.object,\r\n\r\n\t\t// CSS class name\r\n\t\tclassName : PropTypes.string,\r\n\r\n\t\t// Tooltip CSS class name\r\n\t\ttooltipClassName : PropTypes.string\r\n\t}\r\n\r\n\tstatic defaultProps =\r\n\t{\r\n\t\tplacement: 'top',\r\n\t\tinline: true,\r\n\t\tdelay: 350, // in milliseconds\r\n\t\thidingAnimationDuration: 200, // in milliseconds\r\n\t\thideDelay: 50, // in milliseconds\r\n\t\tscreenMargin: 4, // in pixels\r\n\t\toffsetTop: 0, // in pixels\r\n\t\tcontainer: () => document.body\r\n\t}\r\n\r\n\tstate = {}\r\n\r\n\tcomponentDidMount() {\r\n\t\tthis._isMounted = true\r\n\t}\r\n\r\n\tcomponentWillUnmount() {\r\n\t\tthis._isMounted = false\r\n\t\tthis.destroy_tooltip()\r\n\t\tclearTimeout(this.show_timeout)\r\n\t\t// The `mousemove` listener might have, or might have not,\r\n\t\t// been added, so remove it (if it has been added).\r\n\t\tdocument.removeEventListener('mousemove', this.onMouseMove)\r\n\t}\r\n\r\n\tcreateTooltip()\r\n\t{\r\n\t\tconst {\r\n\t\t\ttooltipClassName,\r\n\t\t\tplacement,\r\n\t\t\taccessible\r\n\t\t} = this.props\r\n\r\n\t\tthis.tooltip = document.createElement('div')\r\n\r\n\t\tthis.tooltip.style.position = 'absolute'\r\n\t\tthis.tooltip.style.left = 0\r\n\t\tthis.tooltip.style.top  = 0\r\n\r\n\t\tif (accessible) {\r\n\t\t\t// An \"accessible\" tooltip is focused upon being shown.\r\n\t\t\tthis.tooltip.setAttribute('tabIndex', -1)\r\n\t\t\tthis.tooltip.classList.add('rrui__outline')\r\n\t\t\tthis.tooltip.addEventListener('focusout', this.onFocusOut)\r\n\t\t}\r\n\r\n\t\tthis.tooltip.classList.add('rrui__tooltip')\r\n\t\tthis.tooltip.classList.add(`rrui__tooltip--${getEdge(placement)}`)\r\n\r\n\t\tif (tooltipClassName) {\r\n\t\t\tfor (const className of tooltipClassName.split(/\\s+/)) {\r\n\t\t\t\tthis.tooltip.classList.add(className)\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.tooltip.addEventListener('mouseenter', this.onMouseEnterTooltip)\r\n\t\tthis.tooltip.addEventListener('mouseleave', this.onMouseLeaveTooltip)\r\n\t\tthis.tooltip.addEventListener('keydown', this.onKeyDown)\r\n\r\n\t\tthis.container().appendChild(this.tooltip)\r\n\t}\r\n\r\n\tdestroy_tooltip()\r\n\t{\r\n\t\tclearTimeout(this.hide_timeout)\r\n\t\tclearTimeout(this.hide_on_mouse_leave_timeout)\r\n\r\n\t\tif (this.tooltip)\r\n\t\t{\r\n\t\t\t// Won't throw an exception\r\n\t\t\tthis.tooltip.parentNode.removeChild(this.tooltip)\r\n\t\t\tthis.tooltip = undefined\r\n\t\t}\r\n\t}\r\n\r\n\tcontainer()\r\n\t{\r\n\t\tconst { container } = this.props\r\n\t\treturn container()\r\n\t}\r\n\r\n\tcalculate_coordinates()\r\n\t{\r\n\t\tconst { placement, screenMargin, offsetTop } = this.props\r\n\r\n\t\tconst width  = this.tooltip.offsetWidth\r\n\t\tconst height = this.tooltip.offsetHeight\r\n\r\n\t\tconst origin = getOffset(this.origin)\r\n\r\n\t\tlet top\r\n\t\tlet left\r\n\r\n\t\tswitch (getEdge(placement)) {\r\n\t\t\tcase 'top':\r\n\t\t\t\ttop = origin.top - height\r\n\t\t\t\tbreak\r\n\t\t\tcase 'bottom':\r\n\t\t\t\ttop = origin.top + origin.height\r\n\t\t\t\tbreak\r\n\t\t\tcase 'left':\r\n\t\t\t\tleft = origin.left - width\r\n\t\t\t\tbreak\r\n\t\t\tcase 'right':\r\n\t\t\t\tleft = origin.left + origin.width\r\n\t\t\t\tbreak\r\n\t\t}\r\n\r\n\t\tswitch (getEdge(placement)) {\r\n\t\t\tcase 'top':\r\n\t\t\tcase 'bottom':\r\n\t\t\t\tswitch (getSide(placement)) {\r\n\t\t\t\t\tcase 'start':\r\n\t\t\t\t\t\tleft = origin.left\r\n\t\t\t\t\t\tbreak\r\n\t\t\t\t\tcase 'end':\r\n\t\t\t\t\t\tleft = origin.left + origin.width - width\r\n\t\t\t\t\t\tbreak\r\n\t\t\t\t\t// Default: \"center\".\r\n\t\t\t\t\tdefault:\r\n\t\t\t\t\t\tleft = origin.left + (origin.width - width) / 2\r\n\t\t\t\t\t\tbreak\r\n\t\t\t\t}\r\n\t\t\t\tbreak\r\n\t\t\tcase 'left':\r\n\t\t\tcase 'right':\r\n\t\t\t\tswitch (getSide(placement)) {\r\n\t\t\t\t\tcase 'start':\r\n\t\t\t\t\t\ttop = origin.top\r\n\t\t\t\t\t\tbreak\r\n\t\t\t\t\tcase 'end':\r\n\t\t\t\t\t\ttop = origin.top + origin.height - height\r\n\t\t\t\t\t\tbreak\r\n\t\t\t\t\t// Default: \"center\".\r\n\t\t\t\t\tdefault:\r\n\t\t\t\t\t\ttop = origin.top + (origin.height - height) / 2\r\n\t\t\t\t\t\tbreak\r\n\t\t\t\t}\r\n\t\t\t\tbreak\r\n\t\t}\r\n\r\n\t\treturn fitOnScreen(\r\n\t\t\tleft,\r\n\t\t\ttop + offsetTop - getOffset(this.container()).top,\r\n\t\t\twidth,\r\n\t\t\theight,\r\n\t\t\tscreenMargin\r\n\t\t)\r\n\t}\r\n\r\n\tshow = () =>\r\n\t{\r\n\t\tthis.isShown = true\r\n\r\n\t\t// Play tooltip showing animation\r\n\t\tlet animate = false\r\n\r\n\t\t// If hiding animation is being played,\r\n\t\t// then cancel it, and cancel setting\r\n\t\t// `display` to `none` after it finishes playing.\r\n\t\tif (this.hide_timeout)\r\n\t\t{\r\n\t\t\tclearTimeout(this.hide_timeout)\r\n\t\t\tthis.hide_timeout = undefined\r\n\r\n\t\t\t// Abort tooltip hiding animation.\r\n\t\t\t// It will automatically return to the \"showing\" state.\r\n\t\t\tthis.tooltip.classList.remove('rrui__tooltip--before-hide')\r\n\t\t}\r\n\t\t// Otherwise, the tooltip is hidden (or never been shown)\r\n\t\telse\r\n\t\t{\r\n\t\t\t// Not creating in `componentDidMount()`\r\n\t\t\t// therefore create it here.\r\n\t\t\tif (!this.tooltip)\r\n\t\t\t{\r\n\t\t\t\tthis.createTooltip()\r\n\t\t\t}\r\n\r\n\t\t\t// Play tooltip showing animation\r\n\t\t\tanimate = true\r\n\t\t}\r\n\r\n\t\t// Now that `this.tooltip` has been created,\r\n\t\t// re-render the component so that `ReactDOM.createPortal()` is called.\r\n\t\treturn new Promise((resolve) => {\r\n\t\t\tthis.setState({ isShown: true }, () => {\r\n\t\t\t\tconst { accessible } = this.props\r\n\t\t\t\tconst { x, y } = this.calculate_coordinates()\r\n\r\n\t\t\t\tthis.tooltip.style.left = `${x}px`\r\n\t\t\t\tthis.tooltip.style.top  = `${y}px`\r\n\r\n\t\t\t\t// Play tooltip showing animation\r\n\t\t\t\t// (doing it after setting position because\r\n\t\t\t\t//  setting position applies `display: block`)\r\n\t\t\t\t// (whatever that meant, the animation won't work\r\n\t\t\t\t//  if this is done before setting `left` and `top`)\r\n\t\t\t\tif (animate) {\r\n\t\t\t\t\tthis.tooltip.classList.add('rrui__tooltip--after-show')\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (this.isTouchDevice) {\r\n\t\t\t\t\tdocument.addEventListener('touchstart', this.hideOnTouchOutside)\r\n\t\t\t\t}\r\n\r\n\t\t\t\tresolve()\r\n\t\t\t})\r\n\t\t})\r\n\t}\r\n\r\n\thide = () =>\r\n\t{\r\n\t\tthis.isShown = false\r\n\r\n\t\tconst { hidingAnimationDuration } = this.props\r\n\r\n\t\t// If already hiding, or if already hidden, then do nothing.\r\n\t\t// if (this.hide_timeout || this.tooltip.style.display === 'none')\r\n\t\tif (this.hide_timeout || !this.tooltip) {\r\n\t\t\treturn\r\n\t\t}\r\n\r\n\t\tif (this.isTouchDevice) {\r\n\t\t\tdocument.removeEventListener('touchstart', this.hideOnTouchOutside)\r\n\t\t}\r\n\r\n\t\t// Play tooltip hiding animation\r\n\t\tthis.tooltip.classList.add('rrui__tooltip--before-hide')\r\n\r\n\t\treturn new Promise((resolve) => {\r\n\t\t\t// Set the tooltip to `display: none`\r\n\t\t\t// after its hiding animation finishes.\r\n\t\t\tthis.hide_timeout = setTimeout(() => {\r\n\t\t\t\tthis.hide_timeout = undefined\r\n\t\t\t\tthis.destroy_tooltip()\r\n\t\t\t\tif (this._isMounted) {\r\n\t\t\t\t\tthis.setState({ isShown: false }, resolve)\r\n\t\t\t\t}\r\n\t\t\t}, hidingAnimationDuration)\r\n\t\t})\r\n\t}\r\n\r\n\thideOnTouchOutside = (event) => {\r\n\t\tif (this.isShown) {\r\n\t\t\tif (!this.tooltip.contains(event.target) &&\r\n\t\t\t\t!this.origin.contains(event.target)) {\r\n\t\t\t\tthis.hide()\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tscheduleHide() {\r\n\t\tconst { hideTimeout, hideDelay } = this.props\r\n\t\t// `window.rruiCollapseOnFocusOut` can be used\r\n\t\t// for debugging expandable contents.\r\n\t\tif (window.rruiCollapseOnFocusOut !== false) {\r\n\t\t\tthis.hide_on_mouse_leave_timeout = setTimeout(this.hide, hideTimeout || hideDelay)\r\n\t\t}\r\n\t}\r\n\r\n\tcancelHide() {\r\n\t\tclearTimeout(this.hide_on_mouse_leave_timeout)\r\n\t\tthis.hide_on_mouse_leave_timeout = undefined\r\n\t}\r\n\r\n\tonClick = () => {\r\n\t\tif (this.isShown) {\r\n\t\t\tthis.hide()\r\n\t\t} else {\r\n\t\t\tthis.show().then(() => {\r\n\t\t\t\t// An \"accessible\" tooltip is focused upon being shown.\r\n\t\t\t\tthis.tooltip.focus()\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\r\n\tonMouseMove = () => {\r\n\t\tdocument.removeEventListener('mousemove', this.onMouseMove)\r\n\t\tthis.onMouseEnter()\r\n\t}\r\n\r\n\tonMouseEnterTooltip = () =>\r\n\t{\r\n\t\t// mouse enter and mouse leave events\r\n\t\t// are triggered on mobile devices too\r\n\t\tif (this.isTouchDevice) {\r\n\t\t\treturn\r\n\t\t}\r\n\r\n\t\tthis.isPointerInsideTooltip = true\r\n\r\n\t\tif (this.isShown) {\r\n\t\t\tthis.cancelHide()\r\n\t\t}\r\n\t}\r\n\r\n\tonMouseLeaveTooltip = () =>\r\n\t{\r\n\t\t// mouse enter and mouse leave events\r\n\t\t// are triggered on mobile devices too\r\n\t\tif (this.isTouchDevice) {\r\n\t\t\treturn\r\n\t\t}\r\n\r\n\t\tthis.isPointerInsideTooltip = false\r\n\r\n\t\tif (this.isPointerInsideElement) {\r\n\t\t\treturn\r\n\t\t}\r\n\r\n\t\tif (this.isShown) {\r\n\t\t\tthis.scheduleHide()\r\n\t\t}\r\n\t}\r\n\r\n\tonMouseEnter = () =>\r\n\t{\r\n\t\t// mouse enter and mouse leave events\r\n\t\t// are triggered on mobile devices too\r\n\t\tif (this.isTouchDevice) {\r\n\t\t\treturn\r\n\t\t}\r\n\r\n\t\tif (DocumentMouseMove.wasMouseMoved) {\r\n\t\t\tthis._onMouseEnter()\r\n\t\t} else {\r\n\t\t\t// This code handles the case when a user has scrolled\r\n\t\t\t// and the mouse pointer got placed over the minimized quote\r\n\t\t\t// but that didn't trigger the \"expand\" action (intentionally)\r\n\t\t\t// and then the user moves the mouse and that should expand\r\n\t\t\t// the minimized quote.\r\n\t\t\tdocument.addEventListener('mousemove', this.onMouseMove)\r\n\t\t}\r\n\t}\r\n\r\n\t_onMouseEnter() {\r\n\t\t// mouse enter and mouse leave events\r\n\t\t// are triggered on mobile devices too\r\n\t\tif (this.isTouchDevice) {\r\n\t\t\treturn\r\n\t\t}\r\n\r\n\t\tthis.isPointerInsideElement = true\r\n\r\n\t\tif (this.isShown) {\r\n\t\t\treturn this.cancelHide()\r\n\t\t}\r\n\r\n\t\tconst content = this.renderContent()\r\n\r\n\t\t// If the tooltip has no content\r\n\t\t// (e.g. `react-time-ago` first render)\r\n\t\t// or if React Portal API is not available\r\n\t\t// then don't show the tooltip.\r\n\t\tif (!content || !ReactDOM.createPortal) {\r\n\t\t\treturn\r\n\t\t}\r\n\r\n\t\t// Shouldn't happen, because\r\n\t\t// `mouse leave` event clears this timeout.\r\n\t\tif (this.show_timeout) {\r\n\t\t\treturn\r\n\t\t}\r\n\r\n\t\t// If the tooltip hiding animation is currently playing,\r\n\t\t// then cancel it and re-show the tooltip.\r\n\t\tif (this.hide_timeout) {\r\n\t\t\treturn this.show()\r\n\t\t}\r\n\r\n\t\tconst { delay } = this.props\r\n\r\n\t\t// Don't show the tooltip immediately\r\n\t\t// but rather wait for the user to\r\n\t\t// \"mouse over\" it for a short time interval.\r\n\t\t// (prevents false positives)\r\n\t\tthis.show_timeout = setTimeout(() => {\r\n\t\t\tthis.show_timeout = undefined\r\n\t\t\tthis.show()\r\n\t\t},\r\n\t\tdelay)\r\n\t}\r\n\r\n\tonMouseLeave = () =>\r\n\t{\r\n\t\t// mouse enter and mouse leave events\r\n\t\t// are triggered on mobile devices too\r\n\t\tif (this.isTouchDevice) {\r\n\t\t\treturn\r\n\t\t}\r\n\r\n\t\t// The `mousemove` listener might have, or might have not,\r\n\t\t// been added, so remove it (if it has been added).\r\n\t\tdocument.removeEventListener('mousemove', this.onMouseMove)\r\n\r\n\t\tthis.isPointerInsideElement = false\r\n\r\n\t\tif (this.isPointerInsideTooltip) {\r\n\t\t\treturn\r\n\t\t}\r\n\r\n\t\t// If tooltip hasn't been shown yet,\r\n\t\t// then cancel showing it.\r\n\t\tif (this.show_timeout) {\r\n\t\t\tclearTimeout(this.show_timeout)\r\n\t\t\tthis.show_timeout = undefined\r\n\t\t\treturn\r\n\t\t}\r\n\r\n\t\t// Otherwise, the tooltip is shown, so hide it.\r\n\t\tif (this.isShown) {\r\n\t\t\tthis.scheduleHide()\r\n\t\t}\r\n\t}\r\n\r\n\tonTouchStartSetTouchDevice = () => this.isTouchDevice = true\r\n\r\n\tonTouchStart = () =>\r\n\t{\r\n\t\tconst content = this.renderContent()\r\n\r\n\t\t// mouse enter events won't be processed from now on\r\n\t\tthis.isTouchDevice = true\r\n\r\n\t\t// If the tooltip has no content\r\n\t\t// (e.g. `react-time-ago` first render)\r\n\t\t// or if React Portal API is not available\r\n\t\t// then don't show the tooltip.\r\n\t\tif (!content || !ReactDOM.createPortal) {\r\n\t\t\treturn\r\n\t\t}\r\n\r\n\t\tif (this.isShown) {\r\n\t\t\tthis.hide()\r\n\t\t} else {\r\n\t\t\tthis.show()\r\n\t\t}\r\n\t}\r\n\r\n\tonTouchEnd = () => {}\r\n\r\n\t// Is used on the tooltip itself in \"accessible\" mode.\r\n\tonFocusOut = (event) => {\r\n\t\tif (!this.tooltip.contains(event.relatedTarget) &&\r\n\t\t\t!this.origin.contains(event.relatedTarget)) {\r\n\t\t\tthis.hide()\r\n\t\t}\r\n\t}\r\n\r\n\t// This handler is used both on tooltip toggle button\r\n\t// and the tooltip itself.\r\n\tonKeyDown = (event) => {\r\n\t\tif (event.defaultPrevented) {\r\n\t\t\treturn\r\n\t\t}\r\n\t\tif (event.ctrlKey || event.altKey || event.shiftKey || event.metaKey) {\r\n\t\t\treturn\r\n\t\t}\r\n\t\tswitch (event.keyCode) {\r\n\t\t\t// Hide on \"Escape\".\r\n\t\t\tcase 27:\r\n\t\t\t\tevent.preventDefault()\r\n\t\t\t\t// Hide (if not already hidden).\r\n\t\t\t\tthis.hide()\r\n\t\t\t\tconst { accessible } = this.props\r\n\t\t\t\tif (accessible) {\r\n\t\t\t\t\tthis.origin.focus()\r\n\t\t\t\t}\r\n\t\t\t\treturn\r\n\t\t}\r\n\t}\r\n\r\n\tstoreOriginNode = (ref) => this.origin = ref\r\n\r\n\trenderContent() {\r\n\t\tconst {\r\n\t\t\tcontent,\r\n\t\t\tcomponent: Component,\r\n\t\t\tcomponentProps\r\n\t\t} = this.props\r\n\t\tif (content) {\r\n\t\t\treturn content\r\n\t\t}\r\n\t\tif (Component) {\r\n\t\t\treturn (\r\n\t\t\t\t<Component\r\n\t\t\t\t\t{...componentProps}\r\n\t\t\t\t\thide={this.hide}/>\r\n\t\t\t)\r\n\t\t}\r\n\t\treturn null\r\n\t}\r\n\r\n\trender()\r\n\t{\r\n\t\t// Shows tooltip on mouse over when on desktop.\r\n\t\t// Shows tooltip on touch when on mobile.\r\n\r\n\t\t// `ReactDOM.createPortal()` requires React >= 16.\r\n\t\t// If it's not available then it won't show the tooltip.\r\n\r\n\t\tconst content = this.renderContent()\r\n\r\n\t\tconst tooltip = this.tooltip && content && ReactDOM.createPortal &&\r\n\t\t\tReactDOM.createPortal(content, this.tooltip)\r\n\r\n\t\t// For React >= 16.2.\r\n\t\t// Disable React portal event bubbling.\r\n\t\t// https://github.com/facebook/react/issues/11387#issuecomment-340019419\r\n\t\tif (React.Fragment) {\r\n\t\t\treturn (\r\n\t\t\t\t<React.Fragment>\r\n\t\t\t\t\t{this._render()}\r\n\t\t\t\t\t{tooltip}\r\n\t\t\t\t</React.Fragment>\r\n\t\t\t)\r\n\t\t} else {\r\n\t\t\t// Legacy version support.\r\n\t\t\t// Can be a bit buggy in some rare cases of mouseentering and mouseleaving.\r\n\t\t\t// Will be removed in some future major version release.\r\n\t\t\treturn this._render(tooltip)\r\n\t\t}\r\n\t}\r\n\r\n\t_render(extraChildren) {\r\n\t\tconst\r\n\t\t{\r\n\t\t\taccessible,\r\n\t\t\tinline,\r\n\t\t\tstyle,\r\n\t\t\tclassName,\r\n\t\t\tchildren,\r\n\t\t\t// Rest.\r\n\t\t\tplacement,\r\n\t\t\tcontent,\r\n\t\t\tcontainer,\r\n\t\t\tcomponent,\r\n\t\t\tcomponentProps,\r\n\t\t\tdelay,\r\n\t\t\thideDelay,\r\n\t\t\thideTimeout,\r\n\t\t\thidingAnimationDuration,\r\n\t\t\tscreenMargin,\r\n\t\t\toffsetTop,\r\n\t\t\ttooltipClassName,\r\n\t\t\t...rest\r\n\t\t}\r\n\t\t= this.props\r\n\r\n\t\tconst { isShown } = this.state\r\n\r\n\t\tconst Component = accessible ? 'button' : 'div'\r\n\r\n\t\t// There's no WAI-ARIA example of an `aria-role=\"tooltip\"` widget.\r\n\t\t// https://www.w3.org/TR/wai-aria-practices-1.1/#tooltip\r\n\t\t//\r\n\t\t// `aria-haspopup`:\r\n\t\t// https://www.w3.org/TR/wai-aria-1.1/#aria-haspopup\r\n\t\t// WAI-ARIA 1.1 is not yet supported, so not using `aria-haspopup=\"...\"`.\r\n\r\n\t\treturn (\r\n\t\t\t<Component\r\n\t\t\t\t{...rest}\r\n\t\t\t\tref={ this.storeOriginNode }\r\n\t\t\t\tonMouseEnter={ this.onMouseEnter }\r\n\t\t\t\tonMouseLeave={ this.onMouseLeave }\r\n\t\t\t\tonClick={ accessible ? this.onClick : undefined }\r\n\t\t\t\tonTouchStart={ accessible ? this.onTouchStartSetTouchDevice : this.onTouchStart }\r\n\t\t\t\tonTouchEnd={ accessible ? undefined : this.onTouchEnd }\r\n\t\t\t\tonTouchMove={ accessible ? undefined : this.hide }\r\n\t\t\t\tonTouchCancel={ accessible ? undefined : this.hide }\r\n\t\t\t\taria-expanded={ accessible ? isShown : undefined}\r\n\t\t\t\ttype={ accessible ? 'button' : undefined }\r\n\t\t\t\tstyle={ style }\r\n\t\t\t\tclassName={ classNames(className, 'rrui__tooltip__target', {\r\n\t\t\t\t\t'rrui__button-reset': accessible,\r\n\t\t\t\t\t'rrui__tooltip__target--inline': inline\r\n\t\t\t\t}) }>\r\n\t\t\t\t{ children }\r\n\t\t\t\t{ extraChildren }\r\n\t\t\t</Component>\r\n\t\t)\r\n\t}\r\n}\r\n\r\nfunction fitOnScreen(x, y, width, height, minimal_margin)\r\n{\r\n\tif (x < minimal_margin)\r\n\t{\r\n\t\tx = minimal_margin\r\n\t}\r\n\telse if (x + width + minimal_margin > window.innerWidth)\r\n\t{\r\n\t\tx -= (x + width + minimal_margin) - window.innerWidth\r\n\t}\r\n\r\n\tif (y < window.pageYOffset + minimal_margin)\r\n\t{\r\n\t\ty = window.pageYOffset + minimal_margin\r\n\t}\r\n\telse if (y + height + minimal_margin > window.pageYOffset + window.innerHeight)\r\n\t{\r\n\t\ty -= (y + height + minimal_margin) - (window.pageYOffset + window.innerHeight)\r\n\t}\r\n\r\n\treturn { x, y }\r\n}\r\n\r\n/**\r\n * @param  {string} placement\r\n * @return {string} One of: \"top\", \"right\", \"bottom\", \"left\".\r\n */\r\nfunction getEdge(placement) {\r\n\tconst dashIndex = placement.indexOf('-')\r\n\tif (dashIndex >= 0) {\r\n\t\treturn placement.slice(0, dashIndex)\r\n\t}\r\n\treturn placement\r\n}\r\n\r\n/**\r\n * @param  {string} placement\r\n * @return {string} One of: \"start\", \"center\", \"end\".\r\n */\r\nfunction getSide(placement) {\r\n\tconst dashIndex = placement.indexOf('-')\r\n\tif (dashIndex >= 0) {\r\n\t\treturn placement.slice(dashIndex + '-'.length)\r\n\t}\r\n\treturn 'center'\r\n}\r\n\r\nconst DocumentMouseMove = {\r\n\twasMouseMoved: false\r\n}\r\n\r\nfunction onDocumentMouseMove() {\r\n\tDocumentMouseMove.wasMouseMoved = true\r\n}\r\n\r\nfunction onDocumentScroll() {\r\n\tDocumentMouseMove.wasMouseMoved = false\r\n}\r\n\r\n// There could be several thousand minimized post link quotes on a page\r\n// (when not using `<VirtualScroller/>`). So, in order not to add\r\n// several thousand `mousemove` and `scroll` listeners,\r\n// a single one for each of these two events is added instead.\r\nif (typeof document !== 'undefined') {\r\n\tdocument.addEventListener('mousemove', onDocumentMouseMove)\r\n\tdocument.addEventListener('scroll', onDocumentScroll)\r\n}"]}