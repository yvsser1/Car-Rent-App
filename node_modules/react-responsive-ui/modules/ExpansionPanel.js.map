{"version":3,"sources":["../source/ExpansionPanel.js"],"names":["DownArrow","props","MINIMIZE_TIMER_DELAY","ExpansionPanel","ref","isExpandedInitially","isExpandedExternallyControlled","isExpanded","onToggle","title","ariaLabel","disabled","ToggleIcon","toggleIcon","toggleIconPlacement","animationDuration","style","className","children","_isExpandedInitially","undefined","setExpanded","height","setHeight","expandedHeight","setExpandedHeight","content","resetHeightTimer","toggle","expand","current","scrollHeight","onToggleClick","event","isFirstUseEffect","isFirstUseLayoutEffect","HEADING_STYLE","margin","forwardRef","propTypes","string","isRequired","bool","func","oneOfType","oneOf","number","object","defaultProps"],"mappings":"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","file":"ExpansionPanel.js","sourcesContent":["import React, { useState, useEffect, useRef, useCallback, useLayoutEffect } from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport classNames from 'classnames'\r\n\r\n// For some weird reason, in Chrome, `setTimeout()` would lag up to a second (or more) behind.\r\n// Turns out, Chrome developers have deprecated `setTimeout()` API entirely without asking anyone.\r\n// Replacing `setTimeout()` with `requestAnimationFrame()` can work around that Chrome bug.\r\n// https://github.com/bvaughn/react-virtualized/issues/722\r\nimport { setTimeout, clearTimeout } from 'request-animation-frame-timeout'\r\n\r\nconst DownArrow = (props) => (\r\n\t<svg viewBox=\"0 0 12 7\" {...props}>\r\n\t\t<g stroke=\"none\" strokeWidth=\"1\" fill=\"none\" fillRule=\"evenodd\">\r\n\t\t\t<path fill=\"currentColor\" d=\"M0.776785714,0 C0.995536808,0 1.17633857,0.0761808302 1.31919643,0.228544776 L6,4.93003731 L10.6808036,0.228544776 C10.8236614,0.0805340858 11.0044632,0.00652985075 11.2232143,0.00652985075 C11.4419654,0.00652985075 11.6227671,0.0805340858 11.765625,0.228544776 C11.9218758,0.380908722 12,0.568095905 12,0.79011194 C12,1.01648123 11.9218758,1.20584501 11.765625,1.35820896 L6.26116071,6.88899254 C6.18973179,6.96299788 6.10267908,7 6,7 C5.89732092,7 5.81026821,6.96299788 5.73883929,6.88899254 L0.234375,1.35820896 C0.0781242187,1.20149175 0,1.01321627 0,0.793376866 C0,0.573537458 0.0781242187,0.385261978 0.234375,0.228544776 C0.381697165,0.0761808302 0.562498929,0 0.776785714,0 Z\"/>\r\n\t\t</g>\r\n\t</svg>\r\n)\r\n\r\n// The delay prevents Chrome from optimizing two immediate\r\n// CSS style changes to a single one: first one setting\r\n// <ExpansionPanel/>'s content `height` to `auto`,\r\n// and the second one setting content `height` to `0`,\r\n// so that the minimize animation is displayed.\r\nconst MINIMIZE_TIMER_DELAY = 20\r\n\r\nfunction ExpansionPanel({\r\n\tisExpandedInitially,\r\n\tisExpanded: isExpandedExternallyControlled,\r\n\tonToggle,\r\n\ttitle,\r\n\t'aria-label': ariaLabel,\r\n\tdisabled,\r\n\ttoggleIcon: ToggleIcon,\r\n\ttoggleIconPlacement,\r\n\tanimationDuration,\r\n\tstyle,\r\n\tclassName,\r\n\tchildren\r\n}, ref) {\r\n\tconst _isExpandedInitially = (isExpandedInitially === undefined ? isExpandedExternallyControlled : isExpandedInitially) || false\r\n\r\n\tconst [isExpanded, setExpanded] = useState(_isExpandedInitially)\r\n\tconst [height, setHeight] = useState(_isExpandedInitially ? undefined : 0)\r\n\tconst [expandedHeight, setExpandedHeight] = useState()\r\n\r\n\tconst content = useRef()\r\n\tconst resetHeightTimer = useRef()\r\n\r\n\tconst toggle = useCallback((expand) => {\r\n\t\tif (expand === isExpanded) {\r\n\t\t\t// The expansion panel is already in the requested state. Do nothing.\r\n\t\t\treturn\r\n\t\t}\r\n\t\tif (expand === undefined) {\r\n\t\t\texpand = !isExpanded\r\n\t\t}\r\n\t\tif (onToggle) {\r\n\t\t\tonToggle(expand)\r\n\t\t}\r\n\t\tclearTimeout(resetHeightTimer.current)\r\n\t\tsetExpanded(expand)\r\n\t\tsetHeight(expand ? null : undefined)\r\n\t\tsetExpandedHeight(expand ? null : content.current.scrollHeight)\r\n\t}, [\r\n\t\tisExpanded,\r\n\t\tonToggle\r\n\t])\r\n\r\n\tconst onToggleClick = useCallback((event) => toggle(), [toggle])\r\n\r\n\tconst isFirstUseEffect = useRef(true)\r\n\tconst isFirstUseLayoutEffect = useRef(true)\r\n\r\n\tuseEffect(() => {\r\n\t\tif (isFirstUseEffect.current) {\r\n\t\t\treturn\r\n\t\t}\r\n\t\ttoggle(isExpanded)\r\n\t}, [isExpandedExternallyControlled])\r\n\r\n\tuseLayoutEffect(() => {\r\n\t\tif (isFirstUseLayoutEffect.current) {\r\n\t\t\treturn\r\n\t\t}\r\n\t\tif (isExpanded) {\r\n\t\t\t// If `<ExpansionPanel/>` is being expanded\r\n\t\t\t// then measure its content height.\r\n\t\t\tif (height === null) {\r\n\t\t\t\tsetHeight(content.current.scrollHeight)\r\n\t\t\t}\r\n\t\t\tresetHeightTimer.current = setTimeout(() => {\r\n\t\t\t\tsetHeight(undefined)\r\n\t\t\t}, animationDuration)\r\n\t\t} else {\r\n\t\t\t// Added a timeout here so that the browser doesn't\r\n\t\t\t// optimize two `setState()`s into a single one.\r\n\t\t\tresetHeightTimer.current = setTimeout(() => {\r\n\t\t\t\tsetHeight(0)\r\n\t\t\t}, MINIMIZE_TIMER_DELAY)\r\n\t\t}\r\n\t}, [isExpanded])\r\n\r\n\tuseEffect(() => {\r\n\t\tisFirstUseEffect.current = false\r\n\t}, [])\r\n\r\n\tuseLayoutEffect(() => {\r\n\t\tisFirstUseLayoutEffect.current = false\r\n\t\treturn () => {\r\n\t\t\tclearTimeout(resetHeightTimer.current)\r\n\t\t}\r\n\t}, [])\r\n\r\n\t// There was a possibility of using `<details/>`/`<summary/>` elements here\r\n\t// but `<summary/>` can only contain any valid paragraph content\r\n\t// which means it can't contain lists, divs, paragraphs, etc.\r\n\r\n\treturn (\r\n\t\t<section\r\n\t\t\tstyle={style}\r\n\t\t\tclassName={classNames(className, 'rrui__expansion-panel', {\r\n\t\t\t\t'rrui__expansion-panel--expanded': isExpanded,\r\n\t\t\t\t'rrui__expansion-panel--toggle-icon-start': ToggleIcon && toggleIconPlacement === 'start',\r\n\t\t\t\t'rrui__expansion-panel--toggle-icon-end': ToggleIcon && toggleIconPlacement === 'end'\r\n\t\t\t})}>\r\n\t\t\t<header style={HEADING_STYLE}>\r\n\t\t\t\t<button\r\n\t\t\t\t\tref={ref}\r\n\t\t\t\t\ttype=\"button\"\r\n\t\t\t\t\tonClick={onToggleClick}\r\n\t\t\t\t\taria-expanded={isExpanded ? true : false}\r\n\t\t\t\t\taria-label={ariaLabel}\r\n\t\t\t\t\tdisabled={disabled}\r\n\t\t\t\t\tclassName={classNames('rrui__button-reset', 'rrui__outline', 'rrui__expansion-panel__header')}>\r\n\t\t\t\t\t{ToggleIcon && toggleIconPlacement === 'start' &&\r\n\t\t\t\t\t\t<ToggleIcon\r\n\t\t\t\t\t\t\taria-hidden\r\n\t\t\t\t\t\t\tclassName={classNames('rrui__expansion-panel__toggle-icon', 'rrui__expansion-panel__toggle-icon--start')}/>\r\n\t\t\t\t\t}\r\n\t\t\t\t\t<span className=\"rrui__expansion-panel__heading\">\r\n\t\t\t\t\t\t{title}\r\n\t\t\t\t\t</span>\r\n\t\t\t\t\t{ToggleIcon && toggleIconPlacement === 'end' &&\r\n\t\t\t\t\t\t<ToggleIcon\r\n\t\t\t\t\t\t\taria-hidden\r\n\t\t\t\t\t\t\tclassName={classNames('rrui__expansion-panel__toggle-icon', 'rrui__expansion-panel__toggle-icon--end')}/>\r\n\t\t\t\t\t}\r\n\t\t\t\t</button>\r\n\t\t\t</header>\r\n\t\t\t<div\r\n\t\t\t\tref={content}\r\n\t\t\t\taria-hidden={!isExpanded}\r\n\t\t\t\tstyle={{ height: isExpanded ? (height === null ? 0 : (height === undefined ? 'auto' : `${height}px`)) : (height === undefined ? expandedHeight : 0) }}\r\n\t\t\t\tclassName=\"rrui__expansion-panel__content-wrapper\">\r\n\t\t\t\t<div className=\"rrui__expansion-panel__content\">\r\n\t\t\t\t\t{children}\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</section>\r\n\t)\r\n}\r\n\r\nconst HEADING_STYLE = {\r\n\tmargin: 0\r\n}\r\n\r\nExpansionPanel = React.forwardRef(ExpansionPanel)\r\n\r\nExpansionPanel.propTypes = {\r\n\ttitle: PropTypes.string.isRequired,\r\n\tdisabled: PropTypes.bool,\r\n\t// `isExpanded` can be used for manual control.\r\n\t// For example, when there's a group of expansion panels\r\n\t// and only one of them should be expanded at any given time.\r\n\tisExpanded: PropTypes.bool,\r\n\tisExpandedInitially: PropTypes.bool,\r\n\tonToggle: PropTypes.func,\r\n\ttoggleIcon: PropTypes.oneOfType([\r\n\t\tPropTypes.func,\r\n\t\tPropTypes.bool\r\n\t]).isRequired,\r\n\ttoggleIconPlacement: PropTypes.oneOf(['start', 'end']).isRequired,\r\n\tanimationDuration: PropTypes.number.isRequired,\r\n\tstyle: PropTypes.object,\r\n\tclassName: PropTypes.string\r\n}\r\n\r\nExpansionPanel.defaultProps = {\r\n\ttoggleIcon: DownArrow,\r\n\ttoggleIconPlacement: 'start',\r\n\tanimationDuration: 300\r\n}\r\n\r\nexport default ExpansionPanel"]}