{"ast":null,"code":"import firebase from '../../fbConfig';\nimport 'firebase/storage';\nvar storage = firebase.storage().ref();\nexport var createProject = function createProject(project) {\n  return function (dispatch, getState, _ref) {\n    var getFirebase = _ref.getFirebase,\n        getFirestore = _ref.getFirestore;\n    var firestore = getFirestore();\n    var profile = getState().firebase.profile;\n    var authorId = getState().firebase.auth.uid;\n\n    if (project.companyName !== 'Company') {\n      project.companyName = 'Personal';\n    }\n\n    var newImageName = new Date().getTime();\n    storage.child(\"profile/\".concat(newImageName)).put(project.picture).then(function () {\n      storage.child(\"profile/\".concat(newImageName)).getDownloadURL().then(function (downloadURL) {\n        firestore.collection('project').add({\n          createdAt: new Date(),\n          authorFirstName: profile.firstName,\n          authorLastName: profile.lastName,\n          authhorId: authorId,\n          Currency: project.currency,\n          carPrice: project.carPrice,\n          carYear: project.carYear,\n          carType: project.carType,\n          carModel: project.carModel,\n          carDescription: project.carDescription,\n          feedback: 0,\n          carStatistick: project.listElements,\n          userImage: downloadURL,\n          carCity: project.carCity,\n          carCountry: project.carCountry,\n          companyName: project.companyName,\n          carAddress: project.carAddress,\n          transmision: project.transmision\n        }).then(function () {\n          dispatch({\n            type: 'CREATE_PROJECT',\n            project: project\n          });\n        }).catch(function (err) {\n          dispatch({\n            type: 'CREATE_PROJECT_ERROR',\n            err: err\n          });\n        });\n      });\n    });\n  };\n};\nexport var updateProject = function updateProject(info) {\n  return function (dispatch, getState, _ref2) {\n    var getFirebase = _ref2.getFirebase,\n        getFirestore = _ref2.getFirestore;\n    var firestore = getFirestore();\n    firestore.collection('project').doc(info.carID).update({\n      feedback: info.feedback\n    });\n  };\n};\nexport var sendMessageToClient = function sendMessageToClient(message) {\n  console.log('sendmessage', message);\n  return function (dispatch, getState, _ref3) {\n    var getFirebase = _ref3.getFirebase,\n        getFirestore = _ref3.getFirestore;\n    var firestore = getFirestore();\n    firestore.collection('messages').add({\n      phoneNumber: message.phoneNumber,\n      Email: message.yourEmail,\n      date: message.date,\n      OwnerID: message.userID,\n      projectID: message.projectID,\n      messageStatus: 0,\n      carType: message.carType,\n      carModel: message.carModel\n    });\n  };\n};","map":{"version":3,"sources":["/home/yvsser1/projects/ProjectPFE/src/store/actions/projectAction.js"],"names":["firebase","storage","ref","createProject","project","dispatch","getState","getFirebase","getFirestore","firestore","profile","authorId","auth","uid","companyName","newImageName","Date","getTime","child","put","picture","then","getDownloadURL","downloadURL","collection","add","createdAt","authorFirstName","firstName","authorLastName","lastName","authhorId","Currency","currency","carPrice","carYear","carType","carModel","carDescription","feedback","carStatistick","listElements","userImage","carCity","carCountry","carAddress","transmision","type","catch","err","updateProject","info","doc","carID","update","sendMessageToClient","message","console","log","phoneNumber","Email","yourEmail","date","OwnerID","userID","projectID","messageStatus"],"mappings":"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","sourcesContent":["import firebase from '../../fbConfig'\r\n\r\nimport 'firebase/storage'\r\n\r\nconst storage = firebase.storage().ref()\r\n\r\nexport const createProject = (project) => {\r\n  return (dispatch, getState, { getFirebase, getFirestore }) => {\r\n\r\n    const firestore = getFirestore()\r\n    const profile = getState().firebase.profile\r\n    const authorId = getState().firebase.auth.uid\r\n    if (project.companyName !== 'Company') {\r\n      project.companyName = 'Personal'\r\n    }\r\n    const newImageName = new Date().getTime()\r\n    storage.child(`profile/${newImageName}`).put(project.picture).then(() => {\r\n      storage.child(`profile/${newImageName}`).getDownloadURL().then(function (downloadURL) {\r\n        firestore.collection('project').add({\r\n          createdAt: new Date(),\r\n          authorFirstName: profile.firstName,\r\n          authorLastName: profile.lastName,\r\n          authhorId: authorId,\r\n          Currency: project.currency,\r\n          carPrice: project.carPrice,\r\n          carYear: project.carYear,\r\n          carType: project.carType,\r\n          carModel: project.carModel,\r\n          carDescription: project.carDescription,\r\n          feedback: 0,\r\n          carStatistick: project.listElements,\r\n          userImage: downloadURL,\r\n          carCity: project.carCity,\r\n          carCountry: project.carCountry,\r\n          companyName: project.companyName,\r\n          carAddress: project.carAddress,\r\n          transmision: project.transmision\r\n        }).then(() => {\r\n          dispatch({ type: 'CREATE_PROJECT', project })\r\n        }).catch((err) => {\r\n          dispatch({ type: 'CREATE_PROJECT_ERROR', err })\r\n        })\r\n      })\r\n\r\n    })\r\n\r\n  }\r\n}\r\n\r\nexport const updateProject = (info) => {\r\n  return (dispatch, getState, { getFirebase, getFirestore }) => {\r\n    const firestore = getFirestore()\r\n    firestore.collection('project').doc(info.carID).update({\r\n      feedback: info.feedback\r\n    })\r\n  }\r\n}\r\n\r\nexport const sendMessageToClient = (message) => {\r\n  console.log('sendmessage', message)\r\n  return (dispatch, getState, { getFirebase, getFirestore }) => {\r\n    const firestore = getFirestore()\r\n    firestore.collection('messages').add({\r\n      phoneNumber: message.phoneNumber,\r\n      Email: message.yourEmail,\r\n      date: message.date,\r\n      OwnerID: message.userID,\r\n      projectID: message.projectID,\r\n      messageStatus: 0,\r\n      carType: message.carType,\r\n      carModel: message.carModel\r\n    })\r\n  }\r\n}"]},"metadata":{},"sourceType":"module"}