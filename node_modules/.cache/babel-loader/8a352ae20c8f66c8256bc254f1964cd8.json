{"ast":null,"code":"import _classCallCheck from \"C:\\\\Users\\\\Yasser\\\\Desktop\\\\PFE_LICDA\\\\ProjectPFE\\\\ProjectPFE\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _possibleConstructorReturn from \"C:\\\\Users\\\\Yasser\\\\Desktop\\\\PFE_LICDA\\\\ProjectPFE\\\\ProjectPFE\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:\\\\Users\\\\Yasser\\\\Desktop\\\\PFE_LICDA\\\\ProjectPFE\\\\ProjectPFE\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _createClass from \"C:\\\\Users\\\\Yasser\\\\Desktop\\\\PFE_LICDA\\\\ProjectPFE\\\\ProjectPFE\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _inherits from \"C:\\\\Users\\\\Yasser\\\\Desktop\\\\PFE_LICDA\\\\ProjectPFE\\\\ProjectPFE\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"C:\\\\Users\\\\Yasser\\\\Desktop\\\\PFE_LICDA\\\\ProjectPFE\\\\ProjectPFE\\\\src\\\\components\\\\messages\\\\index.js\";\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { firestoreConnect } from 'react-redux-firebase';\nimport { compose } from 'redux';\nimport { Redirect } from 'react-router-dom';\nimport moment from 'moment';\nimport './index.scss';\n\nvar Message = /*#__PURE__*/function (_Component) {\n  _inherits(Message, _Component);\n\n  _createClass(Message, [{\n    key: \"componentWillReceiveProps\",\n    value: function componentWillReceiveProps(newProps) {\n      this.setState({\n        messages: newProps.messages\n      });\n    }\n  }]);\n\n  function Message(props) {\n    var _this;\n\n    _classCallCheck(this, Message);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Message).call(this, props));\n    _this.state = {\n      messages: []\n    };\n    return _this;\n  }\n\n  _createClass(Message, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var auth = this.props.auth;\n      var messages = this.state.messages;\n\n      if (!this.props.auth.uid) {\n        return /*#__PURE__*/React.createElement(Redirect, {\n          to: \"/\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 28,\n            columnNumber: 14\n          }\n        });\n      }\n\n      console.log('sdsa', messages);\n      var myMessages = [];\n\n      if (messages) {\n        myMessages = Object.values(messages).filter(function (item) {\n          return item.OwnerID === auth.uid;\n        });\n      }\n\n      console.log('MYMESSAGES', myMessages);\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"user-messages\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 40,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"ul\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 41,\n          columnNumber: 13\n        }\n      }, myMessages ? myMessages.map(function (message, i) {\n        return /*#__PURE__*/React.createElement(\"li\", {\n          key: i,\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 44,\n            columnNumber: 19\n          }\n        }, /*#__PURE__*/React.createElement(\"p\", {\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 45,\n            columnNumber: 21\n          }\n        }, \"Email: \", message.Email), /*#__PURE__*/React.createElement(\"p\", {\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 46,\n            columnNumber: 21\n          }\n        }, \"Phone Number: \", message.phoneNumber), /*#__PURE__*/React.createElement(\"p\", {\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 47,\n            columnNumber: 21\n          }\n        }, \"Car: \", message.carType, \" \", message.carModel), /*#__PURE__*/React.createElement(\"p\", {\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 48,\n            columnNumber: 21\n          }\n        }, /*#__PURE__*/React.createElement(\"b\", {\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 49,\n            columnNumber: 23\n          }\n        }, \"FROM - TO:\"), message.date.map(function (date, i) {\n          return /*#__PURE__*/React.createElement(\"span\", {\n            key: i,\n            __self: _this2,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 52,\n              columnNumber: 27\n            }\n          }, moment(date.toDate()).calendar());\n        })));\n      }) : null));\n    }\n  }]);\n\n  return Message;\n}(Component);\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    auth: state.firebase.auth,\n    user: state.firebase.profile,\n    projects: state.firestore.ordered.project,\n    messages: state.firestore.data.messages\n  };\n};\n\nexport default compose(connect(mapStateToProps), firestoreConnect([{\n  collection: 'users'\n}, {\n  collection: 'messages'\n}, {\n  collection: 'project',\n  orderBy: ['createdAt', 'desc']\n}]))(Message);","map":{"version":3,"sources":["C:/Users/Yasser/Desktop/PFE_LICDA/ProjectPFE/ProjectPFE/src/components/messages/index.js"],"names":["React","Component","connect","firestoreConnect","compose","Redirect","moment","Message","newProps","setState","messages","props","state","auth","uid","console","log","myMessages","Object","values","filter","item","OwnerID","map","message","i","Email","phoneNumber","carType","carModel","date","toDate","calendar","mapStateToProps","firebase","user","profile","projects","firestore","ordered","project","data","collection","orderBy"],"mappings":";;;;;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,SAASC,OAAT,QAAwB,aAAxB;AACA,SAASC,gBAAT,QAAiC,sBAAjC;AACA,SAASC,OAAT,QAAwB,OAAxB;AACA,SAASC,QAAT,QAAyB,kBAAzB;AACA,OAAOC,MAAP,MAAmB,QAAnB;AACA,OAAO,cAAP;;IAEMC,O;;;;;8CAEsBC,Q,EAAU;AAClC,WAAKC,QAAL,CAAc;AACZC,QAAAA,QAAQ,EAAEF,QAAQ,CAACE;AADP,OAAd;AAGD;;;AAED,mBAAYC,KAAZ,EAAmB;AAAA;;AAAA;;AACjB,iFAAMA,KAAN;AACA,UAAKC,KAAL,GAAa;AACXF,MAAAA,QAAQ,EAAE;AADC,KAAb;AAFiB;AAKlB;;;;6BACQ;AAAA;;AAAA,UACDG,IADC,GACQ,KAAKF,KADb,CACDE,IADC;AAAA,UAEDH,QAFC,GAEY,KAAKE,KAFjB,CAEDF,QAFC;;AAIP,UAAI,CAAC,KAAKC,KAAL,CAAWE,IAAX,CAAgBC,GAArB,EAA0B;AACxB,4BAAO,oBAAC,QAAD;AAAU,UAAA,EAAE,EAAC,GAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAAP;AACD;;AAEDC,MAAAA,OAAO,CAACC,GAAR,CAAY,MAAZ,EAAoBN,QAApB;AACA,UAAIO,UAAU,GAAG,EAAjB;;AACA,UAAIP,QAAJ,EAAc;AACZO,QAAAA,UAAU,GAAGC,MAAM,CAACC,MAAP,CAAcT,QAAd,EAAwBU,MAAxB,CAA+B,UAACC,IAAD,EAAU;AACpD,iBAAOA,IAAI,CAACC,OAAL,KAAiBT,IAAI,CAACC,GAA7B;AACD,SAFY,CAAb;AAGD;;AACDC,MAAAA,OAAO,CAACC,GAAR,CAAY,YAAZ,EAA0BC,UAA1B;AACA,0BACM;AAAK,QAAA,SAAS,EAAC,eAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACGA,UAAU,GAAGA,UAAU,CAACM,GAAX,CAAe,UAACC,OAAD,EAAUC,CAAV,EAAgB;AAC3C,4BACE;AAAI,UAAA,GAAG,EAAEA,CAAT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAAWD,OAAO,CAACE,KAAnB,CADF,eAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,6BAAkBF,OAAO,CAACG,WAA1B,CAFF,eAGE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAASH,OAAO,CAACI,OAAjB,OAA2BJ,OAAO,CAACK,QAAnC,CAHF,eAIE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBADF,EAEGL,OAAO,CAACM,IAAR,CAAaP,GAAb,CAAiB,UAACO,IAAD,EAAOL,CAAP,EAAa;AAC7B,8BACE;AAAM,YAAA,GAAG,EAAEA,CAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aAAenB,MAAM,CAACwB,IAAI,CAACC,MAAL,EAAD,CAAN,CAAsBC,QAAtB,EAAf,CADF;AAGD,SAJA,CAFH,CAJF,CADF;AAeD,OAhBa,CAAH,GAgBN,IAjBP,CADF,CADN;AAwBD;;;;EAtDmB/B,S;;AA0DtB,IAAMgC,eAAe,GAAG,SAAlBA,eAAkB,CAACrB,KAAD,EAAW;AACjC,SAAO;AACLC,IAAAA,IAAI,EAAED,KAAK,CAACsB,QAAN,CAAerB,IADhB;AAELsB,IAAAA,IAAI,EAAEvB,KAAK,CAACsB,QAAN,CAAeE,OAFhB;AAGLC,IAAAA,QAAQ,EAAEzB,KAAK,CAAC0B,SAAN,CAAgBC,OAAhB,CAAwBC,OAH7B;AAIL9B,IAAAA,QAAQ,EAAEE,KAAK,CAAC0B,SAAN,CAAgBG,IAAhB,CAAqB/B;AAJ1B,GAAP;AAMD,CAPD;;AASA,eAAeN,OAAO,CACpBF,OAAO,CAAC+B,eAAD,CADa,EAEpB9B,gBAAgB,CAAC,CACf;AAAEuC,EAAAA,UAAU,EAAE;AAAd,CADe,EAEf;AAAEA,EAAAA,UAAU,EAAE;AAAd,CAFe,EAGf;AAAEA,EAAAA,UAAU,EAAE,SAAd;AAAyBC,EAAAA,OAAO,EAAE,CAAC,WAAD,EAAc,MAAd;AAAlC,CAHe,CAAD,CAFI,CAAP,CAObpC,OAPa,CAAf","sourcesContent":["import React, { Component } from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { firestoreConnect } from 'react-redux-firebase'\r\nimport { compose } from 'redux'\r\nimport { Redirect } from 'react-router-dom'\r\nimport moment from 'moment'\r\nimport './index.scss'\r\n\r\nclass Message extends Component {\r\n\r\n  componentWillReceiveProps(newProps) {\r\n    this.setState({\r\n      messages: newProps.messages\r\n    })\r\n  }\r\n\r\n  constructor(props) {\r\n    super(props)\r\n    this.state = {\r\n      messages: []\r\n    }\r\n  }\r\n  render() {\r\n    let { auth } = this.props\r\n    let { messages } = this.state\r\n  \r\n    if (!this.props.auth.uid) {\r\n      return <Redirect to='/' />\r\n    }\r\n\r\n    console.log('sdsa', messages)\r\n    let myMessages = []\r\n    if (messages) {\r\n      myMessages = Object.values(messages).filter((item) => {\r\n        return item.OwnerID === auth.uid\r\n      })\r\n    }\r\n    console.log('MYMESSAGES', myMessages)\r\n    return (\r\n          <div className='user-messages'>\r\n            <ul>\r\n              {myMessages ? myMessages.map((message, i) => {\r\n                return (\r\n                  <li key={i}>\r\n                    <p>Email: {message.Email}</p>\r\n                    <p>Phone Number: {message.phoneNumber}</p>\r\n                    <p>Car: {message.carType} {message.carModel}</p>\r\n                    <p>\r\n                      <b>FROM - TO:</b>\r\n                      {message.date.map((date, i) => {\r\n                        return (\r\n                          <span key={i}>{moment(date.toDate()).calendar()}</span>\r\n                        )\r\n                      })}\r\n                    </p>\r\n                  </li>\r\n                )\r\n              }) : null}\r\n            </ul>\r\n          </div>\r\n       \r\n    )\r\n  }\r\n}\r\n\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    auth: state.firebase.auth,\r\n    user: state.firebase.profile,\r\n    projects: state.firestore.ordered.project,\r\n    messages: state.firestore.data.messages\r\n  }\r\n}\r\n\r\nexport default compose(\r\n  connect(mapStateToProps),\r\n  firestoreConnect([\r\n    { collection: 'users' },\r\n    { collection: 'messages' },\r\n    { collection: 'project', orderBy: ['createdAt', 'desc'] }\r\n  ])\r\n)(Message)"]},"metadata":{},"sourceType":"module"}